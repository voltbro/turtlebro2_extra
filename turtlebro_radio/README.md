# turtlebro_radio

Пакет содержит радиомост TurtleBro и вспомогательные скрипты, вынесенные из `turtlebro_actions`.

## Установка пакета

Пакет входит в метапакет `turtlebro_extra` и ставится автоматически. Для отдельной установки выполните на роботе:

```
mkdir -p ~/turtlebro_ws/src
cd ~/turtlebro_ws/src
git clone https://github.com/voltbro/turtlebro_extra
cd ..
colcon build --packages-select turtlebro_radio
source install/setup.bash
```

## Запуск радиомоста

```
ros2 launch turtlebro_radio radio.launch.py port:=/dev/ttyUSB0
```

Аргументы `port` и `baud` позволяют указать последовательный порт и скорость обмена.

## Формат команд

Каждая команда занимает 3 байта и передается в формате `XX_D1_D2`. Ниже значения в десятичном виде.

### Команды настройки (0x)

- 01 — установка максимальной линейной скорости, см/с.
- 02 — установка максимальной угловой скорости, миллирад/с (1000 = 1 рад/с).

### Команды движения (1x)

- 11 — движение вперед на `DD` сантиметров.
- 12 — движение назад на `DD` сантиметров.
- 15 — поворот по часовой стрелке на `DD` градусов.
- 16 — поворот против часовой стрелки на `DD` градусов.

### Команды камеры (2x)

- 21 — установка горизонтального угла камеры, 0–180°.
- 22 — установка вертикального угла камеры, 0–180°.

### Дополнительные команды (4x)

- 41 — пауза выполнения, миллисекунды (1000 = 1 с).

### Команды получения данных (5x)

- 51 — запрос данных аккумуляторов.
- 55 — получение изображения.
- 56 — тестовое сообщение, возвращает строку длиной `value`.

## Примеры пакетов

Скорость соединения — 19200 бод. Разделитель пакетов: `00 FF FF`.

```
#move forward-back
0B 00 1E 0C 00 1E 00 FF FF

0B 00 1E 15 00 5A 29 03 E8 15 00 00 0C 00 1E 00 FF FF

#rotate speed test
02 07 D0 0F 00 1E 02 03 EF 10 00 1E 00 FF FF

#move servo 44
15 00 5A 00 FF FF
```
